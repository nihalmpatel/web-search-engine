Comments for WordPress Developer Resources	 https://developer.wordpress.org Official WordPress Developer Resources Sun, 01 Dec 2019 12:03:56 +0000 hourly 1 https://wordpress.org/?v=5.4-alpha-46799 
				Comment on WP_REST_Request::set_query_params() by Keramot UL Islam				 https://developer.wordpress.org/reference/classes/wp_rest_request/set_query_params/#comment-3501 Keramot UL Islam Sun, 01 Dec 2019 12:03:56 +0000 https://developer.wordpress.org/reference/classes/wp_rest_request/set_query_params/#comment-3501 [php]$request = new WP_REST_Request( &#039;GET&#039;, &#039;/wp/v2/posts&#039; ); $request-&#062;set_query_params( array( &#039;per_page&#039; =&#062; 5, &#039;status&#039; =&#062; &#039;publish&#039;, &#039;order&#039; =&#062; &#039;desc&#039;, &#039;orderby&#039; =&#062; &#039;title&#039;, ) ); [/php] <pre class="brush: php; title: ; notranslate">$request = new WP_REST_Request( 'GET', '/wp/v2/posts' ); $request-&gt;set_query_params( array( 'per_page' =&gt; 5, 'status' =&gt; 'publish', 'order' =&gt; 'desc', 'orderby' =&gt; 'title', ) ); </pre> 
				Comment on get_the_author_meta() by aThemeArt				 https://developer.wordpress.org/reference/functions/get_the_author_meta/#comment-3500 aThemeArt Sun, 01 Dec 2019 10:24:20 +0000 http://developer.wordpress.org/reference/functions/get_the_author_meta/#comment-3500 Get the author ID Outside loop: [php]global $post; $author_id = $post-&#062;post_author;[/php] Get the author ID inside a loop : [php] $author_id = get_the_author_meta( &#039;ID&#039; ); [/php] bellow is a few examples of author value : [php] // to get nicename get_the_author_meta( &#039;nicename&#039;, $author_id ); // to get email get_the_author_meta( &#039;email&#039;, $author_id ); // to get url get_the_author_meta( &#039;url&#039;, $author_id ); // to get status get_the_author_meta( &#039;status&#039;, $author_id ); [/php] <p>Get the author ID Outside loop: </p> <pre class="brush: php; title: ; notranslate">global $post; $author_id = $post-&gt;post_author;</pre> <p>Get the author ID inside a loop : </p> <pre class="brush: php; title: ; notranslate"> $author_id = get_the_author_meta( 'ID' ); </pre> <p>bellow is a few examples of author value :</p> <pre class="brush: php; title: ; notranslate"> // to get nicename get_the_author_meta( 'nicename', $author_id ); // to get email get_the_author_meta( 'email', $author_id ); // to get url get_the_author_meta( 'url', $author_id ); // to get status get_the_author_meta( 'status', $author_id ); </pre> 
				Comment on get_option() by A WP Life				 https://developer.wordpress.org/reference/functions/get_option/#comment-3499 A WP Life Fri, 29 Nov 2019 09:45:08 +0000 http://developer.wordpress.org/reference/functions/get_option/#comment-3499 Simply way to check the option value set or not. For Example, I have a plugin version 1.0 that is installed on the user site. The plugin version is set on the plugin activation. If I released a new plugin version 2.0 and need to check the installed plugin version and new apply changes on the new version update. For it, you need to set default value in function: [php]get_option( &#039;key_name&#039;, &#039;default_value&#039; )[/php] So, if option value not set or avaiable than default value assigned to variable. Sample code: [php] $my_plugin_version = get_option(&#039;plugin_name_version&#039;, &#039;2.0&#039;); if($my_plugin_version == &#039;1.0&#039;) { // do something or apply changes and update the plugin version into option value } else { // do nothing } [/php] <p>Simply way to check the option value set or not.</p> <p>For Example, I have a plugin version 1.0 that is installed on the user site. The plugin version is set on the plugin activation. If I released a new plugin version 2.0 and need to check the installed plugin version and new apply changes on the new version update.</p> <p>For it, you need to set default value in function: </p> <pre class="brush: php; title: ; notranslate">get_option( 'key_name', 'default_value' )</pre> <p>So, if option value not set or avaiable than default value assigned to variable.</p> <p>Sample code:</p> <pre class="brush: php; title: ; notranslate"> $my_plugin_version = get_option('plugin_name_version', '2.0'); if($my_plugin_version == '1.0') { // do something or apply changes and update the plugin version into option value } else { // do nothing } </pre> 
				Comment on add_meta_box() by Vincent Dubroeucq				 https://developer.wordpress.org/reference/functions/add_meta_box/#comment-3496 Vincent Dubroeucq Thu, 28 Nov 2019 09:56:45 +0000 http://developer.wordpress.org/reference/functions/add_meta_box/#comment-3496 &lt;strong&gt;Slight gotcha for comments metabox&lt;/strong&gt; If you need to add a metabox to the comment edit screen, &lt;strong&gt;you have to pass in the value &#039;&lt;code&gt;normal&lt;/code&gt;&#039; for the &lt;code&gt;$context&lt;/code&gt; parameter.&lt;/strong&gt; [php] // This will NOT work add_meta_box( &#039;my_comment_metabox_1&#039;, // ID __(&#039;My comment metabox 1&#039; ), // Title &#039;prefix_comment_metabox&#039;, // Callback &#039;comment&#039; // Screen ); // This WILL work. Same call, but with &#039;normal&#039; for context instead of default &#039;advanced&#039; add_meta_box( &#039;my_comment_metabox_2&#039;, // ID __(&#039;My comment metabox 2&#039; ), // Title &#039;prefix_comment_metabox&#039;, // Callback &#039;comment&#039;, // Screen &#039;normal&#039; // Context ); [/php] <p><strong>Slight gotcha for comments metabox</strong></p> <p>If you need to add a metabox to the comment edit screen, <strong>you have to pass in the value &#8216;<code>normal</code>&#8216; for the <code>$context</code> parameter.</strong></p> <section class="source-content"> <div class="source-code-container"> <pre class="brush: php; title: ; notranslate"> // This will NOT work add_meta_box( 'my_comment_metabox_1', // ID __('My comment metabox 1' ), // Title 'prefix_comment_metabox', // Callback 'comment' // Screen ); // This WILL work. Same call, but with 'normal' for context instead of default 'advanced' add_meta_box( 'my_comment_metabox_2', // ID __('My comment metabox 2' ), // Title 'prefix_comment_metabox', // Callback 'comment', // Screen 'normal' // Context ); </pre> </div> <p class="source-code-links"><span><a href="#" class="show-complete-source">Expand full source code</a><a href="#" class="less-complete-source">Collapse full source code</a></span></p> </section> 
				Comment on wp_remote_post() by Pixelbart				 https://developer.wordpress.org/reference/functions/wp_remote_post/#comment-3495 Pixelbart Wed, 27 Nov 2019 13:33:03 +0000 http://developer.wordpress.org/reference/functions/wp_remote_post/#comment-3495 An example of a JSON body: [php] $endpoint = &#039;api.example.com&#039;; $body = [ &#039;name&#039; =&#062; &#039;Pixelbart&#039;, &#039;email&#039; =&#062; &#039;pixelbart@example.com&#039;, ]; $body = wp_json_encode( $body ); $options = [ &#039;body&#039; =&#062; $body, &#039;headers&#039; =&#062; [ &#039;Content-Type&#039; =&#062; &#039;application/json&#039;, ], &#039;timeout&#039; =&#062; 60, &#039;redirection&#039; =&#062; 5, &#039;blocking&#039; =&#062; true, &#039;httpversion&#039; =&#062; &#039;1.0&#039;, &#039;sslverify&#039; =&#062; false, &#039;data_format&#039; =&#062; &#039;body&#039;, ]; wp_remote_post( $endpoint, $options ); [/php] <p>An example of a JSON body:</p> <section class="source-content"> <div class="source-code-container"> <pre class="brush: php; title: ; notranslate"> $endpoint = 'api.example.com'; $body = [ 'name' =&gt; 'Pixelbart', 'email' =&gt; 'pixelbart@example.com', ]; $body = wp_json_encode( $body ); $options = [ 'body' =&gt; $body, 'headers' =&gt; [ 'Content-Type' =&gt; 'application/json', ], 'timeout' =&gt; 60, 'redirection' =&gt; 5, 'blocking' =&gt; true, 'httpversion' =&gt; '1.0', 'sslverify' =&gt; false, 'data_format' =&gt; 'body', ]; wp_remote_post( $endpoint, $options ); </pre> </div> <p class="source-code-links"><span><a href="#" class="show-complete-source">Expand full source code</a><a href="#" class="less-complete-source">Collapse full source code</a></span></p> </section> 
				Comment on WP_Tax_Query by Aurovrata Venet				 https://developer.wordpress.org/reference/classes/wp_tax_query/#comment-3493 Aurovrata Venet Tue, 26 Nov 2019 16:58:50 +0000 http://developer.wordpress.org/reference/classes/wp_tax_query/#comment-3493 [php] $args = array( &#039;post_type&#039; =&#062; &#039;album&#039;, &#039;post_status&#039; =&#062; &#039;publish&#039;, &#039;tax_query&#039; =&#062; array( array( &#039;taxonomy&#039; =&#062; &#039;genre&#039;, &#039;field&#039; =&#062; &#039;slug&#039;, &#039;terms&#039; =&#062; array( &#039;jazz&#039;, &#039;improv&#039; ) ) ) ); $query = new WP_Query( $args ); [/php] <pre class="brush: php; title: ; notranslate"> $args = array( 'post_type' =&gt; 'album', 'post_status' =&gt; 'publish', 'tax_query' =&gt; array( array( 'taxonomy' =&gt; 'genre', 'field' =&gt; 'slug', 'terms' =&gt; array( 'jazz', 'improv' ) ) ) ); $query = new WP_Query( $args ); </pre> 
				Comment on add_menu_page() by Vincent Dubroeucq				 https://developer.wordpress.org/reference/functions/add_menu_page/#comment-3492 Vincent Dubroeucq Tue, 26 Nov 2019 09:31:58 +0000 http://developer.wordpress.org/reference/functions/add_menu_page/#comment-3492 The callback function used to display the contents of the page &lt;strong&gt;isn&#039;t necessarily required to check current user&#039;s capabilities&lt;/strong&gt;, since the callback is not even hooked in if the user doesn&#039;t have the right capabilities. If you try to directly access a page for which you don&#039;t have required capabilities, you&#039;ll get an error page. <p>The callback function used to display the contents of the page <strong>isn&#8217;t necessarily required to check current user&#8217;s capabilities</strong>, since the callback is not even hooked in if the user doesn&#8217;t have the right capabilities.</p> <p>If you try to directly access a page for which you don&#8217;t have required capabilities, you&#8217;ll get an error page.</p> 
				Comment on timer_stop() by ashour				 https://developer.wordpress.org/reference/functions/timer_stop/#comment-3484 ashour Wed, 20 Nov 2019 19:38:57 +0000 http://developer.wordpress.org/reference/functions/timer_stop/#comment-3484 Check the Pages load Time in seconds [php] add_action( &#039;wp_footer&#039;, function() { echo &#039;&#060;br/&#062;&#039; . &#039;The page is loaded in &#039; . timer_stop() . &#039; seconds &#060;br/&#062;&#039;; }, PHP_INT_MAX );[/php] <p>Check the Pages load Time in seconds</p> <pre class="brush: php; title: ; notranslate"> add_action( 'wp_footer', function() { echo '&lt;br/&gt;' . 'The page is loaded in ' . timer_stop() . ' seconds &lt;br/&gt;'; }, PHP_INT_MAX );</pre> 
				Comment on get_current_screen() by Jb Audras				 https://developer.wordpress.org/reference/functions/get_current_screen/#comment-3477 Jb Audras Sat, 16 Nov 2019 10:33:33 +0000 http://developer.wordpress.org/reference/functions/get_current_screen/#comment-3477 The fields returned are: &lt;code&gt;id&lt;/code&gt; (string) The unique ID of the screen &lt;code&gt;action&lt;/code&gt; (string) Any action associated with the screen. &#039;add&#039; for *-new.php screens. Empty otherwise. &lt;code&gt;base&lt;/code&gt; (string) The base type of the screen. For example, for a page &#039;post-new.php&#039; the base is &#039;post&#039;. &lt;code&gt;parent_base&lt;/code&gt; (string) The base menu parent. This is derived from $parent_file by removing the query string and any .php extension. For example, parent_file values of &#039;edit.php?post_type=page&#039; and &#039;edit.php?post_type=post&#039; have a parent_base of &#039;edit&#039; &lt;code&gt;parent_file&lt;/code&gt; (string) The parent_file for the screen per the admin menu system. Some parent_file values are &#039;edit.php?post_type=page&#039;, &#039;edit.php&#039;, and &#039;options-general.php&#039; &lt;code&gt;post_type&lt;/code&gt; (string) The post type associated with the screen, if any. For example, the &#039;edit.php?post_type=page&#039; screen has a post type of &#039;page&#039; &lt;code&gt;taxonomy&lt;/code&gt; (string) The taxonomy associated with the screen, if any. For example, the &#039;edit-tags.php?taxonomy=category&#039; screen has a taxonomy of &#039;category&#039; Returned object: [php] WP_Screen Object ( [action] =&#062; [base] =&#062; post [id] =&#062; post [is_network] =&#062; [is_user] =&#062; [parent_base] =&#062; edit [parent_file] =&#062; edit.php [post_type] =&#062; post [taxonomy] =&#062; ... (private fields) ) [/php] <p>The fields returned are:</p> <p><code>id</code> (string) The unique ID of the screen<br /> <code>action</code> (string) Any action associated with the screen. &#8216;add&#8217; for *-new.php screens. Empty otherwise.<br /> <code>base</code> (string) The base type of the screen. For example, for a page &#8216;post-new.php&#8217; the base is &#8216;post&#8217;.<br /> <code>parent_base</code> (string) The base menu parent. This is derived from $parent_file by removing the query string and any .php extension. For example, parent_file values of &#8216;edit.php?post_type=page&#8217; and &#8216;edit.php?post_type=post&#8217; have a parent_base of &#8216;edit&#8217;<br /> <code>parent_file</code> (string) The parent_file for the screen per the admin menu system. Some parent_file values are &#8216;edit.php?post_type=page&#8217;, &#8216;edit.php&#8217;, and &#8216;options-general.php&#8217;<br /> <code>post_type</code> (string) The post type associated with the screen, if any. For example, the &#8216;edit.php?post_type=page&#8217; screen has a post type of &#8216;page&#8217;<br /> <code>taxonomy</code> (string) The taxonomy associated with the screen, if any. For example, the &#8216;edit-tags.php?taxonomy=category&#8217; screen has a taxonomy of &#8216;category&#8217;</p> <p>Returned object:</p> <section class="source-content"> <div class="source-code-container"> <pre class="brush: php; title: ; notranslate"> WP_Screen Object ( [action] =&gt; [base] =&gt; post [id] =&gt; post [is_network] =&gt; [is_user] =&gt; [parent_base] =&gt; edit [parent_file] =&gt; edit.php [post_type] =&gt; post [taxonomy] =&gt; ... (private fields) ) </pre> </div> <p class="source-code-links"><span><a href="#" class="show-complete-source">Expand full source code</a><a href="#" class="less-complete-source">Collapse full source code</a></span></p> </section> 
				Comment on add_shortcode() by dingo-d				 https://developer.wordpress.org/reference/functions/add_shortcode/#comment-3473 dingo-d Thu, 14 Nov 2019 12:14:06 +0000 http://developer.wordpress.org/reference/functions/add_shortcode/#comment-3473 When adding `add_shortcode()` function in a plugin, it&#039;s good to add it in a function that is hooked to `init` hook. So that WordPress has time to initialize properly. [php] add_action( &#039;init&#039;, &#039;wpdocs_add_custom_shortcode&#039; ); function wpdocs_add_custom_shortcode() { add_shortcode( &#039;footag&#039;, &#039;wpdocs_footag_func&#039; ); } [/php] As described in the &lt;a href=&quot;https://developer.wordpress.org/plugins/shortcodes/basic-shortcodes/#add-a-shortcode&quot;&gt;plugins handbook&lt;/a&gt;. <p>When adding `add_shortcode()` function in a plugin, it&#8217;s good to add it in a function that is hooked to `init` hook. So that WordPress has time to initialize properly.</p> <pre class="brush: php; title: ; notranslate"> add_action( 'init', 'wpdocs_add_custom_shortcode' ); function wpdocs_add_custom_shortcode() { add_shortcode( 'footag', 'wpdocs_footag_func' ); } </pre> <p>As described in the <a href="https://developer.wordpress.org/plugins/shortcodes/basic-shortcodes/#add-a-shortcode">plugins handbook</a>.</p>